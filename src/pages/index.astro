---
import Layout from '../layouts/Layout.astro';
import { PERSONAL_INFO } from '../consts';
import { galleryItems } from '../data/gallery';
import ThemeToggle from '../components/ThemeToggle.astro';

const projects = galleryItems.map((item, index) => ({
  ...item,
  slug: item.label.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, ''),
  year: `202${3 + index}`,
  description: getProjectDescription(item.category)
}));

function getProjectDescription(category: string | undefined): string {
  switch (category) {
    case 'web': return 'From ancient cobblestone streets to bustling modern metropolises, capturing the soul of destinations that define our wanderlust';
    case 'design': return 'Timeless monochrome compositions that strip away color to reveal the raw emotion and architectural poetry of the world';
    case 'mobile': return 'The authentic rhythm of urban life unfolds through candid moments where light meets shadow on city streets worldwide';
    default: return 'Sweeping vistas and intimate natural details that showcase the untamed beauty of our planet\'s most breathtaking landscapes';
  }
}
---

<Layout title={PERSONAL_INFO.title}>
  <!-- Floating Navigation -->
  <nav id="main-nav" class="fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-white/10 dark:bg-black/10 backdrop-blur-xl border border-white/20 dark:border-white/10 rounded-full transition-all duration-500 hover:bg-white/15 dark:hover:bg-black/15">
    <div class="px-8 py-3 flex items-center gap-8">
      <a href="/" class="text-sm font-medium text-white/90 hover:text-white transition-all duration-300">
        Shreyan Sengupta
      </a>
      <div class="flex items-center gap-6">
        <a href="#work" class="text-sm text-white/70 hover:text-white transition-all duration-300">Work</a>
        <a href="#about" class="text-sm text-white/70 hover:text-white transition-all duration-300">About</a>
        <ThemeToggle />
      </div>
    </div>
  </nav>

  <!-- Immersive Hero Section -->
  <section class="relative h-screen flex items-center justify-center overflow-hidden">
    <!-- Parallax Background -->
    <div class="absolute inset-0 parallax-bg">
      <img
        src="/gallery/sample1.png"
        alt="Hero Background"
        class="w-full h-full object-cover scale-110 transition-transform duration-[2000ms] ease-out"
        id="hero-bg"
      />
      <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/20 to-black/40"></div>
      <div class="absolute inset-0 bg-gradient-to-r from-black/20 via-transparent to-black/20"></div>
    </div>

    <!-- Hero Content -->
    <div class="relative z-10 text-center px-6 max-w-4xl mx-auto">
      <div class="space-y-8">
        <h1
          class="text-5xl md:text-7xl lg:text-8xl font-light text-white leading-[0.9] tracking-tight"
          data-aos="fade-up"
          data-aos-delay="400"
          data-aos-duration="1000"
        >
          Visual
          <span class="block italic font-extralight opacity-90">Storytelling</span>
        </h1>

        <p
          class="text-xl md:text-2xl text-white/80 max-w-2xl mx-auto font-light leading-relaxed"
          data-aos="fade-up"
          data-aos-delay="600"
          data-aos-duration="1000"
        >
          I'm Shreyan, a photographer who believes every frame holds the power to transport.
        </p>

        <div
          class="pt-8"
          data-aos="fade-up"
          data-aos-delay="800"
          data-aos-duration="1000"
        >
          <a
            href="#work"
            class="inline-flex items-center gap-3 px-8 py-4 bg-white/10 hover:bg-white/20 border border-white/20 hover:border-white/30 backdrop-blur-md text-white rounded-full transition-all duration-500 hover:scale-105 text-sm font-medium"
          >
            Explore My Work
            <svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          </a>
        </div>
      </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
      <div class="w-6 h-10 border-2 border-white/30 rounded-full flex justify-center">
        <div class="w-1 h-3 bg-white/50 rounded-full mt-2 animate-pulse"></div>
      </div>
    </div>
  </section>

  <!-- Selected Work -->
  <section id="work" class="py-32 bg-gradient-to-b from-white via-gray-50/50 to-white dark:from-black dark:via-gray-900/30 dark:to-black">
    <div class="max-w-7xl mx-auto px-6">

      <!-- Section Header -->
      <div class="text-center mb-20" data-aos="fade-up" data-aos-duration="1000">
        <h2 class="text-4xl md:text-6xl font-light text-gray-900 dark:text-white mb-6 tracking-tight">
          Selected <span class="italic font-extralight">Work</span>
        </h2>
        <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto font-light">
          From the golden hour streets of Amsterdam to the misty highlands of Scotland,
          I craft visual narratives that celebrate the extraordinary in the everyday.
        </p>
      </div>

      <div class="space-y-32">
        {projects.map((project, index) => (
          <article
            class="group cursor-pointer"
            data-project={project.slug}
            data-aos="fade-up"
            data-aos-delay={200}
            data-aos-duration="1000"
          >
            <a href={`/album/${project.slug}`} class="block">
              <div class={`grid grid-cols-1 lg:grid-cols-2 gap-16 items-center ${index % 2 === 1 ? 'lg:flex-row-reverse' : ''}`}>

                <!-- Project Image -->
                <div class={`relative ${index % 2 === 1 ? 'lg:order-2' : 'lg:order-1'}`}>
                  <div class="relative aspect-[4/3] overflow-hidden rounded-2xl shadow-2xl">
                    <img
                      src={project.href}
                      alt={project.label}
                      class="w-full h-full object-cover transition-all duration-1000 group-hover:scale-110"
                      loading="lazy"
                    />

                    <!-- Premium Overlay -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-all duration-700"></div>

                    <!-- Floating Action -->
                    <div class="absolute top-6 right-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0">
                      <div class="w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center border border-white/30 hover:bg-white/30 transition-all duration-300">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                        </svg>
                      </div>
                    </div>

                    <!-- Image Number -->
                    <div class="absolute bottom-6 left-6">
                      <span class="text-white/80 text-sm font-medium bg-black/20 backdrop-blur-sm px-3 py-1 rounded-full">
                        {String(index + 1).padStart(2, '0')}
                      </span>
                    </div>
                  </div>
                </div>

                <!-- Project Info -->
                <div class={`space-y-8 ${index % 2 === 1 ? 'lg:order-1' : 'lg:order-2'}`}>
                  <div class="space-y-6">
                    <div class="space-y-2">
                      <span class="text-sm text-gray-500 dark:text-gray-400 uppercase tracking-wider font-medium">
                        {project.category || 'Photography'}
                      </span>
                      <h3 class="text-3xl md:text-5xl font-light text-gray-900 dark:text-white leading-tight tracking-tight group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors duration-500">
                        {project.label}
                      </h3>
                    </div>

                    <p class="text-lg text-gray-600 dark:text-gray-400 leading-relaxed font-light max-w-lg">
                      {project.description}
                    </p>

                    <div class="flex items-center gap-6 pt-4">
                      <span class="text-sm text-gray-500 dark:text-gray-400 font-medium">
                        {project.year}
                      </span>
                      <div class="w-px h-4 bg-gray-300 dark:bg-gray-600"></div>
                      <span class="text-sm text-gray-900 dark:text-white font-medium group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors duration-300">
                        View Project →
                      </span>
                    </div>
                  </div>
                </div>

              </div>
            </a>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section id="about" class="py-32 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900 dark:to-black">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <div class="space-y-12" data-aos="fade-up" data-aos-duration="1000">
        <h2 class="text-4xl md:text-6xl font-light text-gray-900 dark:text-white tracking-tight">
          About <span class="italic font-extralight">Me</span>
        </h2>

        <div class="space-y-8 text-lg md:text-xl text-gray-600 dark:text-gray-400 font-light leading-relaxed">
          <p>
            From the golden hour streets of Amsterdam to the misty highlands of Scotland,
            I craft visual narratives that celebrate the extraordinary in the everyday.
          </p>
          <p>
            Each photograph is more than a moment captured—it's an invitation to experience
            the world through a different lens, to find beauty in the overlooked, and to connect
            with places and emotions that transcend geographical boundaries.
          </p>
        </div>

        <div class="pt-8">
          <a
            href="mailto:hello@shreyansengupta.com"
            class="inline-flex items-center gap-3 px-8 py-4 bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-full transition-all duration-500 hover:scale-105 hover:shadow-lg text-sm font-medium"
          >
            Get In Touch
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-16 px-6 bg-gray-50 dark:bg-gray-900">
    <div class="max-w-6xl mx-auto">
      <div class="text-center space-y-8" data-aos="fade-up" data-aos-duration="1000">
        <div class="text-2xl font-light text-gray-900 dark:text-white">
          Shreyan Sengupta
        </div>

        <div class="flex justify-center space-x-8 text-sm text-gray-600 dark:text-gray-400">
          <a href="#work" class="hover:text-gray-900 dark:hover:text-white transition-colors">Work</a>
          <a href="#about" class="hover:text-gray-900 dark:hover:text-white transition-colors">About</a>
          <a href="mailto:hello@shreyansengupta.com" class="hover:text-gray-900 dark:hover:text-white transition-colors">Contact</a>
        </div>

        <div class="pt-8 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400 space-y-2">
          <p>&copy; 2025 Shreyan Sengupta. All rights reserved.</p>
          <p class="text-xs">Designed & developed with care</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Enhanced Atlas Card Style Scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const nav = document.getElementById('main-nav');
      const heroBg = document.getElementById('hero-bg');
      let isScrolled = false;

      // Parallax and Navigation Effects
      function updateOnScroll() {
        const scrollY = window.scrollY;
        const windowHeight = window.innerHeight;

        // Parallax effect for hero background
        if (heroBg && scrollY < windowHeight) {
          const parallaxSpeed = 0.5;
          heroBg.style.transform = `translateY(${scrollY * parallaxSpeed}px) scale(1.1)`;
        }

        // Enhanced navigation state
        if (scrollY > 100 && !isScrolled) {
          nav?.classList.add('scrolled');
          nav?.style.setProperty('background', 'rgba(0, 0, 0, 0.8)');
          nav?.style.setProperty('backdrop-filter', 'blur(20px)');
          nav?.style.setProperty('border-color', 'rgba(255, 255, 255, 0.2)');
          isScrolled = true;
        } else if (scrollY <= 100 && isScrolled) {
          nav?.classList.remove('scrolled');
          nav?.style.setProperty('background', 'rgba(255, 255, 255, 0.1)');
          nav?.style.setProperty('backdrop-filter', 'blur(20px)');
          nav?.style.setProperty('border-color', 'rgba(255, 255, 255, 0.1)');
          isScrolled = false;
        }
      }

      // Smooth scroll for navigation links
      function initSmoothScroll() {
        const links = document.querySelectorAll('a[href^="#"]');
        links.forEach(link => {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
              target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
              });
            }
          });
        });
      }

      // Advanced scroll-triggered animations
      function initScrollAnimations() {
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('animate-in');
            }
          });
        }, observerOptions);

        // Observe all project articles for staggered animations
        document.querySelectorAll('article[data-project]').forEach((el, index) => {
          el.style.setProperty('--animation-delay', `${index * 150}ms`);
          observer.observe(el);
        });
      }

      // Enhanced image hover effects
      function initImageEffects() {
        const projectImages = document.querySelectorAll('article[data-project] img');
        projectImages.forEach(img => {
          const container = img.closest('.relative');
          if (container) {
            container.addEventListener('mouseenter', () => {
              img.style.transform = 'scale(1.1)';
            });
            container.addEventListener('mouseleave', () => {
              img.style.transform = 'scale(1.0)';
            });
          }
        });
      }

      // Throttled scroll handler
      let ticking = false;
      function handleScroll() {
        if (!ticking) {
          requestAnimationFrame(() => {
            updateOnScroll();
            ticking = false;
          });
          ticking = true;
        }
      }

      // Initialize all effects
      initSmoothScroll();
      initScrollAnimations();
      initImageEffects();
      window.addEventListener('scroll', handleScroll, { passive: true });

      // Theme change observer
      const themeObserver = new MutationObserver(() => {
        if (isScrolled) {
          updateOnScroll();
        }
      });

      themeObserver.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class']
      });
    });
  </script>

  <!-- Additional Atlas Card Styles -->
  <style>
    /* Parallax container */
    .parallax-bg {
      will-change: transform;
    }

    /* Scroll animations */
    article[data-project] {
      opacity: 0;
      transform: translateY(40px);
      transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      transition-delay: var(--animation-delay, 0ms);
    }

    article[data-project].animate-in {
      opacity: 1;
      transform: translateY(0);
    }

    /* Enhanced hover effects */
    .group:hover img {
      transition: transform 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    /* Smooth scroll behavior */
    html {
      scroll-behavior: smooth;
    }

    /* Custom scrollbar matching Atlas Card style */
    ::-webkit-scrollbar {
      width: 4px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 2px;
    }

    .dark ::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
    }

    /* Navigation enhancements */
    #main-nav.scrolled {
      transform: translate(-50%, 0) scale(0.95);
    }

    /* Luxury button effects */
    .luxury-button {
      position: relative;
      overflow: hidden;
    }

    .luxury-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
      transition: left 0.5s;
    }

    .luxury-button:hover::before {
      left: 100%;
    }
  </style>
</Layout>
